(()=>{window.ThreadsMediaPositionFinder=window.ThreadsMediaPositionFinder||{};window.ThreadsMediaPositionFinder.isThreadsMediaContainer=function(i){const t=i.style.cssText||"";return(t.includes("--x-borderRadius")||t.includes("--x-aspectRatio"))&&i.offsetWidth>100&&i.offsetHeight>50};window.ThreadsMediaPositionFinder.isGridContainer=function(i){return i.style.cssText.includes("--x-gridTemplateColumns")};window.ThreadsMediaPositionFinder.ensureRelativePosition=function(i){window.getComputedStyle(i).position==="static"&&(i.style.position="relative")};window.ThreadsMediaPositionFinder.findThreadsContainer=function(i,t=15){let n=i.parentElement,e=0;for(;n&&e<t;){if(window.ThreadsMediaPositionFinder.isGridContainer(n))return{container:null,gridParent:n,depth:e};if(window.ThreadsMediaPositionFinder.isThreadsMediaContainer(n))return{container:n,gridParent:null,depth:e};n=n.parentElement,e++}return{container:null,gridParent:null,depth:e}};window.ThreadsMediaPositionFinder.findFallbackContainer=function(i,t=15){let n=i.parentElement,e=0;for(;n&&e<t;){const r=window.getComputedStyle(n);if(n.offsetWidth>100&&n.offsetHeight>100&&(r.position==="relative"||r.position==="absolute"||r.borderRadius&&r.borderRadius!=="0px"))return{container:n,depth:e};n=n.parentElement,e++}return{container:null,depth:-1}};window.ThreadsMediaPositionFinder.findMediaContainer=function(i){if(!i)return null;const{container:t,gridParent:n}=window.ThreadsMediaPositionFinder.findThreadsContainer(i);if(t)return window.ThreadsMediaPositionFinder.ensureRelativePosition(t),t;if(n){const{container:r}=window.ThreadsMediaPositionFinder.findFallbackContainer(i,10);if(r&&r!==n)return window.ThreadsMediaPositionFinder.ensureRelativePosition(r),r}const{container:e}=window.ThreadsMediaPositionFinder.findFallbackContainer(i);return e?(window.ThreadsMediaPositionFinder.ensureRelativePosition(e),e):i.parentElement?(window.ThreadsMediaPositionFinder.ensureRelativePosition(i.parentElement),i.parentElement):null};})();
